<table class="w-full text-sm">
    <thead>
      <tr class="text-left text-slate-600 dark:text-slate-300 border-b border-slate-200 dark:border-slate-700">
        <th class="py-2 pr-2">ID</th>
        <th class="py-2 pr-2">User</th>
        <th class="py-2 pr-2">Studio</th>
        <th class="py-2 pr-2">Début</th>
        <th class="py-2 pr-2">Fin</th>
        <th class="py-2 pr-2">Statut</th>
        <th class="py-2 pr-2">Code</th>
        <th class="py-2 pr-2">Quota</th>
        <th class="py-2">Actions</th>
      </tr>
    </thead>
    <tbody class="divide-y divide-slate-200 dark:divide-slate-800">
      {% for r in rows %}
      <tr class="hover:bg-slate-50/70 dark:hover:bg-slate-900/40">
        <td class="py-2 pr-2 font-medium">{{ r.id }}</td>
        <td class="py-2 pr-2">{{ r.user_id }}</td>
        <td class="py-2 pr-2">{{ r.studio_id }}</td>
        <td class="py-2 pr-2 whitespace-nowrap">{{ to_local(r.start) }}</td>
        <td class="py-2 pr-2 whitespace-nowrap">{{ to_local(r.end) }}</td>
        <td class="py-2 pr-2">
          {% if r.status == "READY" %}
            <span class="inline-flex items-center rounded-full bg-emerald-100 text-emerald-800 dark:bg-emerald-400/10 dark:text-emerald-300 px-2 py-0.5 text-xs font-medium">READY</span>
          {% elif r.status == "IN_USE" %}
            <span class="inline-flex items-center rounded-full bg-indigo-100 text-indigo-800 dark:bg-indigo-400/10 dark:text-indigo-300 px-2 py-0.5 text-xs font-medium">IN_USE</span>
          {% elif r.status == "FINISHED" %}
            <span class="inline-flex items-center rounded-full bg-slate-200 text-slate-800 dark:bg-slate-400/10 dark:text-slate-300 px-2 py-0.5 text-xs font-medium">FINISHED</span>
          {% elif r.status == "CANCELLED" %}
            <span class="inline-flex items-center rounded-full bg-rose-100 text-rose-800 dark:bg-rose-400/10 dark:text-rose-300 px-2 py-0.5 text-xs font-medium">CANCELLED</span>
          {% else %}
            <span class="inline-flex items-center rounded-full bg-amber-100 text-amber-800 dark:bg-amber-400/10 dark:text-amber-300 px-2 py-0.5 text-xs font-medium">{{ r.status }}</span>
          {% endif %}
        </td>
        <td class="py-2 pr-2 tabular-nums">{{ r.code or "—" }}</td>
        <td class="py-2 pr-2">{{ r.quota_reservation_id or "—" }}</td>
        <td class="py-2">
          {% if r.status == "READY" %}
            <form class="inline-flex items-center gap-2"
                  hx-post="/ui/checkin/{{ r.id }}" hx-target="#tbl" hx-swap="outerHTML">
              <input name="code" placeholder="code" size="6" required
                     class="rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-2 py-1 text-sm">
              <button class="btn rounded-lg bg-indigo-600 hover:bg-indigo-500 text-white px-3 py-1.5 text-sm font-medium">
                Check-in
              </button>
            </form>
          {% elif r.status == "IN_USE" %}
            <form class="inline-flex"
                  hx-post="/ui/checkout/{{ r.id }}" hx-target="#tbl" hx-swap="outerHTML">
              <button class="btn rounded-lg bg-emerald-600 hover:bg-emerald-500 text-white px-3 py-1.5 text-sm font-medium">
                Check-out
              </button>
            </form>
          {% else %}
            <span class="text-slate-400">—</span>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>